; MSX PSG proPLAYER V 0.47c - WYZ 19.03.2016
; (WYZTracker 2.0 o superior)


; ENSAMBLAR CON AsMSX

; RAM

;____________________________________


INTERR:		byte		;INTERRUPTORES 1=ON 0=OFF
				;BIT 0=CARGA CANCION ON/OFF
				;BIT 1=PLAYER ON/OFF
				;BIT 2=EFECTOS ON/OFF
				;BIT 3=SFX ON/OFF
				;BIT 4=LOOP

;MUSICA **** EL ORDEN DE LAS VARIABLES ES FIJO ******



SONG:		byte		;DBNº DE CANCION
TEMPO:		byte		;DB TEMPO
TTEMPO:		byte		;DB CONTADOR TEMPO

PUNTERO_A:	word		;DW PUNTERO DEL CANAL A
PUNTERO_B:	word		;DW PUNTERO DEL CANAL B
PUNTERO_C:	word		;DW PUNTERO DEL CANAL C

CANAL_A:	word		;DW DIRECION DE INICIO DE LA MUSICA A
CANAL_B:	word		;DW DIRECION DE INICIO DE LA MUSICA B
CANAL_C:	word		;DW DIRECION DE INICIO DE LA MUSICA C

PUNTERO_P_A:	word		;DW PUNTERO PAUTA CANAL A
PUNTERO_P_B:	word		;DW PUNTERO PAUTA CANAL B
PUNTERO_P_C:	word		;DW PUNTERO PAUTA CANAL C

PUNTERO_P_A0:	word		;DW INI PUNTERO PAUTA CANAL A
PUNTERO_P_B0:	word		;DW INI PUNTERO PAUTA CANAL B
PUNTERO_P_C0:	word		;DW INI PUNTERO PAUTA CANAL C

PUNTERO_P_DECA:	word		;DW PUNTERO DE INICIO DEL DECODER CANAL A
PUNTERO_P_DECB:	word		;DW PUNTERO DE INICIO DEL DECODER CANAL B
PUNTERO_P_DECC:	word		;DW PUNTERO DE INICIO DEL DECODER CANAL C

PUNTERO_DECA:	word		;DW PUNTERO DECODER CANAL A
PUNTERO_DECB:	word		;DW PUNTERO DECODER CANAL B
PUNTERO_DECC:	word		;DW PUNTERO DECODER CANAL C

REG_NOTA_A:	byte		;DB REGISTRO DE LA NOTA EN EL CANAL A
VOL_INST_A:	byte		;DB VOLUMEN RELATIVO DEL INSTRUMENTO DEL CANAL A
REG_NOTA_B:	byte		;DB REGISTRO DE LA NOTA EN EL CANAL B
VOL_INST_B:	byte		;DB VOLUMEN RELATIVO DEL INSTRUMENTO DEL CANAL B
REG_NOTA_C:	byte		;DB REGISTRO DE LA NOTA EN EL CANAL C
VOL_INST_C:	byte		;DB VOLUMEN RELATIVO DEL INSTRUMENTO DEL CANAL C

PUNTERO_L_DECA:	word		;DW PUNTERO DE INICIO DEL LOOP DEL DECODER CANAL A
PUNTERO_L_DECB:	word		;DW PUNTERO DE INICIO DEL LOOP DEL DECODER CANAL B
PUNTERO_L_DECC:	word		;DW PUNTERO DE INICIO DEL LOOP DEL DECODER CANAL C

;CANAL DE EFECTOS DE RITMO - ENMASCARA OTRO CANAL

PUNTERO_P:	word		;DW PUNTERO DEL CANAL EFECTOS
CANAL_P:	word		;DW DIRECION DE INICIO DE LOS EFECTOS
PUNTERO_P_DECP:	word		;DW PUNTERO DE INICIO DEL DECODER CANAL P
PUNTERO_DECP:	word		;DW PUNTERO DECODER CANAL P
PUNTERO_L_DECP:	word		;DW PUNTERO DE INICIO DEL LOOP DEL DECODER CANAL P
;SELECT_CANAL_P	DB	INTERR+$36	;DB SELECCION DE CANAL DE EFECTOS DE RITMO


SFX_L:		word		;DW DIRECCION BUFFER EFECTOS DE RITMO REGISTRO BAJO
SFX_H:		word		;DW DIRECCION BUFFER EFECTOS DE RITMO REGISTRO ALTO
SFX_V:		word		;DW DIRECCION BUFFER EFECTOS DE RITMO REGISTRO VOLUMEN
SFX_MIX:	word		;DW DIRECCION BUFFER EFECTOS DE RITMO REGISTRO MIXER


;EFECTOS DE SONIDO

N_SONIDO:	byte		;DB : NUMERO DE SONIDO
PUNTERO_SONIDO:	word		;DW : PUNTERO DEL SONIDO QUE SE REPRODUCE



;DB [13] BUFFERs DE REGISTROS DEL PSG

PSG_REG:	.ds	16
PSG_REG_SEC:	.ds	16
ENVOLVENTE:	byte		;DB : FORMA DE LA ENVOLVENTE
				;BIT 0	  : FRECUENCIA CANAL ON/OFF
				;BIT 1-2  : RATIO
				;BIT 3-3  : FORMA
ENVOLVENTE_BACK: byte		;DB:	BACKUP DE LA FORMA DE LA ENVOLENTE


;MEMORIA PARA BUFFER DE SONIDO!
;RECOMENDABLE $10 O MAS BYTES POR CANAL.

BUFFER_CANAL_A:	.ds	$10
BUFFER_CANAL_B:	.ds	$10
BUFFER_CANAL_C:	.ds	$10
BUFFER_CANAL_P:	.ds	$10
